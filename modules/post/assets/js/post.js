"use strict";var add=document.querySelector(".page-title-action"),_continer=document.querySelector(".nestfeed-forms-start");add&&(add.addEventListener("click",_feed_add_template),add.setAttribute("nx-target-common",".next-modal-dialog"),add.setAttribute("nx-target","#next-modal-0"));let edit=document.querySelectorAll("tr.type-nextfeeds");if(edit)for(let e=0;e<edit.length;e++){let t=edit[e].getAttribute("id"),n=t.split("-");if(n[1]){let e=n[1],i=document.querySelector("tr#"+t).querySelector("div.row-actions a");i&&(i.addEventListener("click",_feed_add_template),i.setAttribute("nx-target-common",".next-modal-dialog"),i.setAttribute("nx-target","#next-modal-0"),i.setAttribute("data-nextfeed-id",e))}}function _feed_add_template(){event.preventDefault();let e=document.querySelector("#_nextfeed_froms_templates"),t=this.getAttribute("data-nextfeed-id");t&&""!=t?(e.setAttribute("nextfeed-id",t),_continer&&_continer.classList.add("nextloading"),_set_forms_data(t)):e.removeAttribute("nextfeed-id"),next_modal_popup(this)}function _set_forms_data(e){""!=e&&jQuery.ajax({data:e,type:"get",url:window.nextfeed.resturl+"nextfeed/v1/getforms/?idtemp="+e,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",window.nextfeed.nonce)},dataType:"json",success:function(e){let t=JSON.parse(e),n=document.querySelector("#_basic_name");n&&(n.value=t._basic_name);let i=document.querySelector("#_basic_type");i&&_select_options(i,t._basic_type),document.querySelector("#_basic_categories")&&i&&_nextfeed_get_categories(i,t._basic_categories);let d=document.querySelector("#_basic_default");d&&("yes"==t._basic_default?d.checked=!0:d.checked=!1),_continer&&setTimeout(function(){_continer.classList.remove("nextloading")},2e3)}})}function _nextfeed_get_categories(e,t){var n=e.value;if(""!=n)return jQuery.ajax({data:n,type:"get",url:window.nextfeed.resturl+"nextfeed/v1/categories/?idtemp="+n,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",window.nextfeed.nonce)},dataType:"json",success:function(e){let n=document.querySelector("#_basic_categories");n.innerHTML="";let i=JSON.parse(e);for(let e in i)if(i.hasOwnProperty(e)){let d=document.createElement("option");d.value=e,e==t&&d.setAttribute("selected","selected"),d.innerHTML=i[e],n.appendChild(d)}}}),!0}function _select_options(e,t){if(e){let n=e.options;for(let e=0;e<n.length;e++)n[e].value==t?n[e].selected=!0:n[e].selected=!1}return!0}jQuery(document).ready(function(e){let t=document.querySelector("#_basic_type");t&&_nextfeed_get_categories(t,""),jQuery("#_nextfeed_froms_templates").submit(function(e){e.preventDefault();let t=jQuery(this).serialize(),n=(this.getAttribute("id"),this.getAttribute("nextfeed-id"));_continer&&_continer.classList.add("nextloading");jQuery.ajax({data:t,type:"post",url:window.nextfeed.resturl+"nextfeed/v1/save/?idtemp="+n,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",window.nextfeed.nonce)},dataType:"json",success:function(e){let t=document.querySelector("._give-message");t.innerHTML="",t.setAttribute("style","display: block;");let n=JSON.parse(e);if(n.error)return void(t.innerHTML=n.message);n.success&&(t.innerHTML=n.message),_continer&&_continer.classList.remove("nextloading");let i=n.editor;i&&setTimeout(function(){let e=n.editor_mode;window.location.href=e?window.nextfeed.admin_url+"?post="+n.data_id+"&action=elementor":window.nextfeed.admin_url+"?post="+n.data_id+"&action=edit"},1500),setTimeout(function(){t.setAttribute("style","display: none;")},2e3),i||window.location.reload()}})})});